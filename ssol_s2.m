clc
clear all
 

syms w1 w2 w3 w4 w5 w6 %w7 w8 w9% v9 %v13 v14 v15 %v4 v5 v6 v7  v8 v9 v10 v11 v12 v13 v14 v15
w7=0.9;
w8=0.5;
w9=1.1;
% v15=1+rand(1,1);
% V1_1=rand(2,3);
% V1=[V1_1;rand(1,1) rand(1,1) v9];
% V2_1=rand(1,2);
% V2=[V2_1 ;rand(1,1) v13;v14 v15];
V1=rand(3,3);
V2=rand(3,2);

V2_1=V2(:,1);
V2_2=V2(:,2);

V1_1=V1(:,1);
V1_2=V1(:,2);
V1_3=V1(:,3);

v1=V1(1,1);
v2=V1(1,2);
v3=V1(1,3);
v4=V1(2,1);
v5=V1(2,2);
v6=V1(2,3);
v7=V1(3,1);
v8=V1(3,2);
v9=V1(3,3);

v10=V2(1,1);
v11=V2(1,2);
v12=V2(2,1);
v13=V2(2,2);
v14=V2(3,1);
v15=V2(3,2);
 

h21=rand(3,3);

h12=rand(3,3);



h2r=rand(3,3);
h1r=rand(3,3);

hr1=rand(3,3);
hr2=rand(3,3);


w=[w1 w2 w3;w4 w5 w6;w7 w8 w9];


x=h21+h2r*w*hr1;

y=h12+h1r*w*hr2;



x1=x(1,1);
x2=x(1,2);
x3=x(1,3);
x4=x(2,1);
x5=x(2,2);
x6=x(2,3);
x7=x(3,1);
x8=x(3,2);
x9=x(3,3);

y1=y(1,1);
y2=y(1,2);
y3=y(1,3);
y4=y(2,1);
y5=y(2,2);
y6=y(2,3);
y7=y(3,1);
y8=y(3,2);
y9=y(3,3);



% 
% S = solve(x1*v10+x2*v12+x3*v14,x4*v10+x5*v12+x6*v14,x7*v10+x8*v12+x9*v14,...
%           x1*v11+x2*v13+x3*v15,x4*v11+x5*v13+x6*v15,x7*v11+x8*v13+x9*v15,...
%           y1*(v1-v2)+y2*(v4-v5)+y3*(v7-v8),y4*(v1-v2)+y5*(v4-v5)+y6*(v7-v8),y7*(v1-v2)+y8*(v4-v5)+y9*(v7-v8),...
%           y1*(v1-v3)+y2*(v4-v6)+y3*(v7-v9),y4*(v1-v3)+y5*(v4-v6)+y6*(v7-v9),y7*(v1-v3)+y8*(v4-v6)+y9*(v7-v9),3*y6*v15+y4*v12+2);

 S=solve(y*V2_1,y*V2_2 )

% S=solve(y1*y5*y9 - y1*y6*y8 - y2*y4*y9 + y2*y6*y7 + y3*y4*y8 - y3*y5*y7,...
%     x1*x5*x9 - x1*x6*x8 - x2*x4*x9 + x2*x6*x7 + x3*x4*x8 - x3*x5*x7,...
%      y1*y6 -  y3*y4 -  y1*y9 +  y3*y7 -  y5*y9 +  y6*y8 ,...
%       x1*x6 -  x3*x4 -  x1*x9 +  x3*x7 -  x5*x9 +  x6*x8 ,...
%       y1*v10+y2*v12+y3*v14,y1*v11+y2*v13+y3*v15,...
%       x1*(v1-v2)+x2*(v4-v5)+x3*(v7-v8),x1*(v1-v3)+x2*(v4-v6)+x3*(v7-v9));
%  



